### Mysql有几种锁？
1. 表级锁：开销小，加锁快；不会出现死锁；锁位粒度大；发生锁冲突概率最高，并发度最低
2. 行级锁：开销大，加锁慢；会出现死锁；锁位粒度小；发生锁冲突的概率低，并发度也很高
3. 页面锁：开销和加锁速度介于表级锁和行级锁之间；会出现死锁；锁位粒度介于表级锁和行级锁之间；并发度一般

### Mysql中有哪几种类型的表格
Innodb、Heap、ISAM、Merge、MyISAM

### MyISAM和Innodb的区别
* MyISAM

1. 不支持事务，每次查询都是原子性的
2. 支持表级锁，即每次操作都是给整个表加锁
3. 会存储表的总行数
4. 一个表有三个文件：索引文件、表结构文件、数据文件
5. 采用非聚簇索引

* Innodb
1. 支持ACID的事务，支持事务的四种隔离级别
2. 支持行级锁、外键约束；因此支持写并发
3. 不存储总行数
4. 一个Innodb存储在一个文件空间，也有可能存在多个
5. 主键索引采用聚集索引（索引的数据域存储文件本身），辅索引的数据域存储主键的值。最好使用自增主键，索引底层为B+树结构，防止插入数据时，文件过大调整

### 什么情况下配置索引但无法使用

1. 以'%'开头的LIKE语句，模糊匹配
2. OR语句前后没有同时使用索引
3. 数据类型出现隐式转换，查询列使用函数计算

### 实践中如何优化Mysql

* 索引优化
1. 索引列中最好不要出现null值，复合索引可能不走有null值的索引
2. 经常在where子句使用的列，最好设置索引
3. 对于有多个列where或者order by，应该建立复合索引
4. 以'%'开头的LIKE语句不会走索引
5. 尽量不要在列上进行运算
6. 尽量不要使用not in 或 <>操作

* SQL慢查询优化
1. 查询时，能不使用*就不要用
2. 大部分情况下连接效率大于子查询
3. 复杂SQL多使用explain分析语句
4. 多表连接时，尽量小表驱动大表，即小表join大表
5. 对于经常使用的查询，可以开启缓存

* 表优化
1. 表的字段尽可能使用 not null
2. 字段长度固定的表查询会更快
3. 对数据数量比较多的表进行拆分；

水平切分：将记录散列到不同的的表中，各表的结构完全相同

垂直切分：将表中的大字段单独拆分到另一个表，形成一对一的关系

### 事务的特性

* 原子性：即不可分割，事务内要么全部被执行，要么全部不被执行

* 一致性：事务的执行使得数据库从一种状态转换为另一种正确的状态

* 隔离性：在事务提交之前，不允许把该事务对数据的任何改变提供给其他的事务

* 持久性：事务提交后，将其结果永久的保存在数据库中

### Mysql中innodb支持的四种事务隔离级别

* read uncommitted(读未提交)
* read committed(读已提交)
* repeatable read(可重复读)
* serializable(串行化)

### 并发事务带来哪些问题

* 脏读：当一个事务正在访问数据数据，并且对该数据进行了修改，但本次修改还没有提交到数据库，另一个事务也进行访问了这条数据，然后使用了这条数据。因为这个数据还没有提交，另一个事务读取了这个数据，所以为脏读。
* 丢失修改：当一个事务读取了一个数据，另一个数据也读取了这个数据，第一个事务对数据进行了修改，第二个事务也对数据进行了修改，这个时候，第一个事务修改的结果丢失。
* 不可重复度：指一个事务多次访问同一个数据，当这个事务获取了一次数据后，另一个数据也访问该数据，并进行了修改，这个时候第一个事务再次请求这个数据，导致两次请求到的数据不一致，因此成为不可重复读。
* 幻读：当一个数据读取到了几行数据后，另一个数据插入了几行数据，在随后的查询中，第一个事务会发现多了一些原本不存在的数据，称为幻读。

### 不同的事务隔离级别怎么解决并发事务带来的问题

| 隔离级别           | 脏读 | 不可重复读 | 幻影读 |
| -----             | ---- |   ----    | ----  |
| read uncommitted  |  √   |     √     |  √    |
| read committed    |  ×   |     √     |  √    |
| repeatable read   |  ×   |     ×     |  √    |
| serializable      |  ×   |     ×     |  ×    |

Mysql InnoDB 下默认是repeatable read(可重复读)的隔离级别。

### 数据库设计的三个范式

第一范式（1NF）：对属性的原子性约束，要求属性具有原子性，不可再分解

第二范式（2NF）：对记录的唯一性约束，要求记录有唯一标志，即实体的唯一性

第三范式（3NF）：是对字段的冗余性的约束，即任何字段不能由其他字段派生出来，它要求字段没有冗余

