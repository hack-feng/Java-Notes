## 1. å‰è¨€

ä¸Šç¯‡æ–‡ç« è®²è¿°äº†Mycatåˆ†åº“åˆ†è¡¨çš„æ¦‚å¿µï¼Œæœ¬æ–‡ä¸»è¦è®²å¦‚ä½•ä½¿ç”¨Mycatæ¥å®ç°åˆ†åº“åˆ†è¡¨ã€‚

æ­£å¼é…ç½®ä¹‹å‰ï¼Œå…ˆå£°æ˜ä¸€ä¸‹ï¼Œé…ç½®åˆ†è¡¨è¿™é‡Œé‡‡ç”¨æ³¨é‡Šé…ç½®çš„æ–¹æ³•ï¼Œé…ç½®å³å¯ç”Ÿæ•ˆå¹¶ä¸”åŠ¨æ€æ›´æ–°Mycaté…ç½®å¹¶ä¸”æŠŠé…ç½®æŒä¹…åŒ–ï¼Œå…·ä½“å¯å‚è€ƒ[é€šè¿‡æ³¨é‡Šé…ç½®](https://www.yuque.com/ccazhw/ml3nkf/f9f24306bbd3992c1baff00cdb0956a4)æ–‡æ¡£ä»‹ç»ï¼Œè¿™ä¸ªæ³¨é‡Šé…ç½®æŒºæ–¹ä¾¿çš„ã€‚åé¢çš„Mycatåˆ†ç‰‡ç®—æ³•è®²è§£ä¼šä»‹ç»ç›´æ¥é€šè¿‡å»ºè¡¨è¯­å¥åˆ›å»ºåˆ†ç‰‡ã€‚

è¿™é‡Œä»‹ç»å’Œä¸Šæ–‡Mycatå·²æ‰§è¡Œçš„å†…å®¹å‡æ— å…³è”ï¼Œè¿™é‡Œå…ˆé‡ç½®Mycaté…ç½®ã€‚é‡ç½®åè¯»å†™åˆ†ç¦»æ–‡ç« ä¸­ç›¸å…³çš„é…ç½®å…¨éƒ¨æ¸…é™¤ã€‚

~~~xml
/*+ mycat:resetConfig{} */
~~~

![image-20231116142659742](https://image.xiaoxiaofeng.site/blog/2023/11/16/xxf-20231116142659.png?xxfjava)

**æ³¨æ„ï¼šè¿™é‡Œè¿æ¥Mycatæ—¶å»ºè®®ä½¿ç”¨Navicatï¼Œéƒ¨åˆ†å¼€æºçš„æ•°æ®åº“è¿æ¥è½¯ä»¶ é€»è¾‘è¡¨ å¯èƒ½å±•ç¤ºä¸å‡ºæ¥ï¼Œä¾‹å¦‚åšä¸»ä½¿ç”¨çš„è¿™æ¬¾ï¼ˆæ»¡æ»¡çš„å…¨æ˜¯æ³ªğŸ˜­ï¼‰ï¼Œéƒ¨åˆ†å›¾æ˜¯åœ¨Navicatä¸Šæˆªå–**

## 2. å•æ•°æ®æºå•åº“åˆ†è¡¨ï¼ˆæ°´å¹³åˆ†è¡¨ï¼‰

### 2.1 å‡†å¤‡æ•°æ®æº

åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®åº“è¿æ¥ã€‚`127.0.0.1:3308`ï¼Œç”¨æˆ·åï¼š`root`, å¯†ç ï¼š`123456`ã€‚

![image-20231116132052342](https://image.xiaoxiaofeng.site/blog/2023/11/16/xxf-20231116132052.png?xxfjava)

### 2.2 åœ¨Mycatä¸Šæ·»åŠ æ•°æ®æº

é¦–å…ˆä½¿ç”¨åœ¨Mycatä¸Šæ·»åŠ æ•°æ®æºï¼Œä½¿ç”¨æ³¨è§£å°±å¦‚æœè¯»å†™åˆ†ç¦»ä¸€æ–‡ä¸­çš„åœ¨`conf/datasources`ç›®å½•ä¸‹åˆ›å»º`xxx.datasource.json`æ–‡ä»¶ã€‚

~~~mysql
/*+ mycat:createDataSource{
	"dbType":"mysql",
	"idleTimeout":60000,
	"initSqls":[],
	"initSqlsGetConnection":true,
	"instanceType":"READ_WRITE",
	"maxCon":1000,
	"maxConnectTimeout":3000,
	"maxRetryCount":5,
	"minCon":1,
	"name":"sharding",
	"password":"123456",
	"type":"JDBC",
	"url":"jdbc:mysql://127.0.0.1:3308?useUnicode=true&serverTimezone=UTC&characterEncoding=UTF-8",
	"user":"root",
	"weight":0
} */;
~~~

é€šè¿‡å‘½ä»¤`/*+ mycat:showDataSources{} */`ï¼Œå¯ä»¥çœ‹åˆ°æ–°å¢çš„æ•°æ®æº`sharding`ã€‚

![image-20231116143246320](https://image.xiaoxiaofeng.site/blog/2023/11/16/xxf-20231116143246.png?xxfjava)

åŒæ—¶å¯ä»¥çœ‹åˆ°åœ¨`conf/datasources`ç›®å½•ä¸‹å¤šäº†`sharding.datasource.json`æ–‡ä»¶ã€‚

![image-20231116143359103](https://image.xiaoxiaofeng.site/blog/2023/11/16/xxf-20231116143359.png?xxfjava)

### 2.3 æ°´å¹³åˆ†è¡¨å®ç°

åœ¨`127.0.0.1:3308`åˆ›å»ºæ•°æ®åº“`xxf_sharding`ã€‚

~~~sql
CREATE DATABASE `xxf_sharding`;
~~~

åœ¨Mycatæ•°æ®åº“æ‰§è¡ŒåŒæ­¥ç”Ÿæˆschema

~~~sql
/*+ mycat:createSchema{
	"customTables":{},
	"globalTables":{},
	"normalTables":{},
	"schemaName":"xxf_sharding",
	"shardingTables":{},
	"targetName":"sharding"
} */;
~~~

æ¥ç€åˆ›å»ºæ•°æ®åˆ†ç‰‡è§„åˆ™ï¼Œåœ¨Mycatä¸Šæ‰§è¡Œï¼Œé‡‡ç”¨æ³¨é‡Šæ–¹æ³•é…ç½®ï¼Œå…ˆçœ‹é…ç½®ï¼š

~~~sql
/*+ mycat:createTable{
  	"schemaName":"xxf_sharding",
	"tableName":"xxf_user",
  	"shardingTable":{
		"createTableSQL":"CREATE TABLE `xxf_user` (
			`id` BIGINT(20) NOT NULL COMMENT 'ç”¨æˆ·ID',
			`user_name` VARCHAR(30) NULL DEFAULT NULL COMMENT 'ç”¨æˆ·å§“å',
			`email` VARCHAR(50) NULL DEFAULT NULL COMMENT 'ç”¨æˆ·é‚®ç®±',
			`phone` VARCHAR(11) NULL DEFAULT NULL COMMENT 'æ‰‹æœºå·ç ',
			`sex` CHAR(1) NULL DEFAULT NULL COMMENT 'ç”¨æˆ·æ€§åˆ«',
			PRIMARY KEY (`id`) USING BTREE
		) COMMENT='ç¬‘å°æ«-ç”¨æˆ·ä¿¡æ¯è¡¨' COLLATE='utf8_general_ci' ENGINE=InnoDB;",
  
		"function":{
			"properties":{
				"mappingFormat": "sharding/xxf_sharding/xxf_user_${tableIndex}",
				"dbNum":1, //åˆ†åº“æ•°é‡
				"tableNum":3, //åˆ†è¡¨æ•°é‡
				"tableMethod":"mod_hash(id)", //åˆ†è¡¨åˆ†ç‰‡å‡½æ•°
				"storeNum":1, //å®é™…å­˜å‚¨èŠ‚ç‚¹æ•°é‡
				"dbMethod":"mod_hash(id)" //åˆ†åº“åˆ†ç‰‡å‡½æ•°
				}
		 },
		 "partition":{
		}
	}
} */;
~~~

~~~
è§£é‡Šä¸€ä¸‹
mappingFormatå±æ€§
targetName/schemaName/tableName
æ•°æ®åº“ /ç‰©ç†åº“å /ç‰©ç†åˆ†è¡¨å

targetNameï¼šå°±æ˜¯é…ç½®é›†ç¾¤æ•°æ®æºåç§°ï¼Œå¯¹åº”prototype.cluster.json æ–‡ä»¶ä¸­çš„nameå±æ€§ï¼›

schemaNameï¼šé€»è¾‘åº“ï¼›

tableName: åˆ†è¡¨çš„åç§°ï¼›

ä»¥ä¸Šå±æ€§éƒ½æ”¯æŒè¡¨è¾¾å¼ï¼Œæ¯”å¦‚user_${tableIndex}ä¼šè‡ªåŠ¨æ ¹æ®é…ç½®çš„åˆ†è¡¨æ•°é‡ï¼ˆtableNumï¼‰ï¼Œä»0å¼€å§‹ï¼Œåˆ†ä¸ºxxf_user_0ã€xxf_user_1ã€xxf_user_2ä¸‰ä¸ªè¡¨ï¼Œé…ç½®é›†ç¾¤æ•°æ®æºå’Œé€»è¾‘åº“éƒ½æ˜¯è¿™ä¸ªåŸç†ï¼Œè¿™é‡Œæ˜¯å•æ•°æ®æºå•åº“å°±ä¸æ¼”ç¤ºäº†ã€‚

å¦å¤–ï¼Œå»ºè¡¨è¯­å¥å¤æ‚çš„è¯å¯ä»¥å…ˆå¯¼å‡ºè¡¨ç»“æ„ï¼Œå¤åˆ¶ç²˜è´´åˆ°createTableSQLå±æ€§åè¾¹å³å¯ã€‚

ç®—æ³•è¯·å‚è€ƒï¼šåˆ†ç‰‡ç®—æ³•ç®€ä»‹â€”â€”å¦‚æœé»˜è®¤çš„ç®—æ³•éƒ½ä¸æ»¡è¶³éœ€æ±‚ï¼Œå¯ä»¥ä¸‹è½½mycatçš„æºä»£ç ï¼Œç„¶åä¿®æ”¹å¯¹åº”çš„ç®—æ³•ï¼Œæ‰“åŒ…æ¥ç”¨å³å¯ã€‚
~~~

æ‰§è¡Œå®Œæˆï¼Œå¯ä»¥çœ‹è§åœ¨`127.0.0.1:3308`æ•°æ®åº“`xxf_sharding`ç”Ÿæˆäº†3å¼ åˆ†ç‰‡è¡¨ã€‚

![image-20231120095505650](https://image.xiaoxiaofeng.site/blog/2023/11/20/xxf-20231120095512.png?xxfjava)

æŸ¥çœ‹ä¸€ä¸‹åˆ†ç‰‡è§„åˆ™ï¼Œåœ¨mycatä¸‹æ‰§è¡Œï¼š

~~~sql
/*+ mycat:showTopology{
	"schemaName":"xxf_sharding",
	"tableName":"xxf_user"
} */;
~~~

ç»“æœå¦‚ä¸‹ï¼š

![image-20231120100011277](https://image.xiaoxiaofeng.site/blog/2023/11/20/xxf-20231120100011.png?xxfjava)

åœ¨Mycatä¸‹æ‰§è¡Œä»¥ä¸‹æ’å…¥è¯­å¥ï¼š

~~~sql
INSERT INTO `xxf_user` VALUES (1, 'å¼ ä¸‰1', 'zhangsan1@xiaoxiaofeng.com', '18300000001', '1');
INSERT INTO `xxf_user` VALUES (2, 'å¼ ä¸‰2', 'zhangsan2@xiaoxiaofeng.com', '18300000002', '1');
INSERT INTO `xxf_user` VALUES (3, 'å¼ ä¸‰3', 'zhangsan3@xiaoxiaofeng.com', '18300000003', '1');
INSERT INTO `xxf_user` VALUES (4, 'å¼ ä¸‰4', 'zhangsan4@xiaoxiaofeng.com', '18300000004', '1');
INSERT INTO `xxf_user` VALUES (5, 'å¼ ä¸‰5', 'zhangsan5@xiaoxiaofeng.com', '18300000005', '1');
INSERT INTO `xxf_user` VALUES (6, 'å¼ ä¸‰6', 'zhangsan6@xiaoxiaofeng.com', '18300000006', '1');
~~~

åœ¨Mycatä¸Šå¯ä»¥çœ‹åˆ°`xxf_sharding`åº“ä¸‹çš„`xxf_user`è¡¨é‡Œæœ‰å…¨éƒ¨çš„æ•°æ®ã€‚

**æ³¨æ„è¿™ä¸ªxxf_userè¡¨æ˜¯é€»è¾‘è¡¨ï¼Œåœ¨ç‰©ç†åº“ä¸­æ˜¯ä¸å­˜åœ¨çš„ï¼Œä¸»è¦æ˜¯ç»¼åˆxxf_user_0~3è¡¨çš„ä¿¡æ¯**

![image-20231120101812092](https://image.xiaoxiaofeng.site/blog/2023/11/20/xxf-20231120101812.png?xxfjava)

å¯ä»¥çœ‹åˆ°æ•°æ®åˆ†åˆ«æ’å…¥åˆ°äº†ä¸åŒçš„åˆ†ç‰‡ä¸Š

![image-20231120100202306](https://image.xiaoxiaofeng.site/blog/2023/11/20/xxf-20231120100202.png?xxfjava)

![image-20231120100212054](https://image.xiaoxiaofeng.site/blog/2023/11/20/xxf-20231120100212.png?xxfjava)

![image-20231120100318285](https://image.xiaoxiaofeng.site/blog/2023/11/20/xxf-20231120100318.png?xxfjava)

å•æ•°æ®æºçš„æ°´å¹³æ‹†åˆ†è¡¨åˆ°è¿™é‡Œå·²ç»å®ç°äº†ï¼Œä¸è¿‡è¿™æ ·æ‰€æœ‰çš„è®¿é—®å‹åŠ›ä»ç„¶éƒ½åœ¨è¿™ä¸€å°æœåŠ¡å™¨ä¸Šï¼Œå¯èƒ½å¹¶ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œæ¥ä¸‹æ¥ä¸€èµ·çœ‹ä¸€ä¸‹å¤šæ•°æ®æºå¤šåº“çš„ç¯å¢ƒä¸‹å¦‚ä½•åˆ†è¡¨å§ã€‚

## 3. å¤šæ•°æ®æºå¤šåº“åˆ†è¡¨ï¼ˆæ°´å¹³åˆ†åº“åˆ†è¡¨ï¼‰

å…ˆé‡ç½®ä¸€ä¸‹æˆ‘ä»¬çš„Mycatã€‚

~~~sql
/*+ mycat:resetConfig{} */
~~~

### 3.1 å‡†å¤‡æ•°æ®æº

åˆ›å»ºä¸¤ä¸ªæ–°çš„æ•°æ®æºï¼Œåˆ†åˆ«å¦‚ä¸‹ã€‚

~~~
`127.0.0.1:3307`ï¼Œç”¨æˆ·åï¼š`root`, å¯†ç ï¼š`123456`ã€‚
`127.0.0.1:3308`ï¼Œç”¨æˆ·åï¼š`root`, å¯†ç ï¼š`123456`ã€‚
~~~

![image-20231120104336203](https://image.xiaoxiaofeng.site/blog/2023/11/20/xxf-20231120104336.png?xxfjava)

### 3.2 åœ¨Mycatä¸Šæ·»åŠ æ•°æ®æº

åœ¨Mycatè¿æ¥ä¸‹åˆ†åˆ«æ·»åŠ ds0å’Œds1æ•°æ®æºã€‚å¦‚ä¸‹ï¼š

**æ·»åŠ æ•°æ®æºds0**

~~~mysql
/*+ mycat:createDataSource{
	"dbType":"mysql",
	"idleTimeout":60000,
	"initSqls":[],
	"initSqlsGetConnection":true,
	"instanceType":"READ_WRITE",
	"maxCon":1000,
	"maxConnectTimeout":3000,
	"maxRetryCount":5,
	"minCon":1,
	"name":"ds0",
	"password":"123456",
	"type":"JDBC",
	"url":"jdbc:mysql://127.0.0.1:3307?useUnicode=true&serverTimezone=UTC&characterEncoding=UTF-8",
	"user":"root",
	"weight":0
} */;
~~~

**æ·»åŠ æ•°æ®æºds1**

~~~sql
/*+ mycat:createDataSource{
	"dbType":"mysql",
	"idleTimeout":60000,
	"initSqls":[],
	"initSqlsGetConnection":true,
	"instanceType":"READ_WRITE",
	"maxCon":1000,
	"maxConnectTimeout":3000,
	"maxRetryCount":5,
	"minCon":1,
	"name":"ds1",
	"password":"123456",
	"type":"JDBC",
	"url":"jdbc:mysql://127.0.0.1:3308?useUnicode=true&serverTimezone=UTC&characterEncoding=UTF-8",
	"user":"root",
	"weight":0
} */;
~~~

é€šè¿‡å‘½ä»¤`/*+ mycat:showDataSources{} */`ï¼Œå¯ä»¥çœ‹åˆ°æ–°å¢çš„æ•°æ®æºã€‚

![image-20231120105824567](https://image.xiaoxiaofeng.site/blog/2023/11/20/xxf-20231120105824.png?xxfjava)

> è¿™é‡Œæˆ‘å•ç‹¬åˆ›å»ºäº†ä¸¤ä¸ªæ•°æ®æºé…ç½®æ–‡ä»¶ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åˆ©ç”¨å·²ç»å­˜åœ¨çš„prototypeDs.datasource.jsonæ–‡ä»¶ä½œä¸ºæ•°æ®æº1ï¼Œé‚£ä¹ˆä½ åªéœ€è¦å†é…ç½®æ•°æ®æº2å°±å¯ä»¥äº†ã€‚

### 3.3 åˆ›å»ºé›†ç¾¤

**åˆ›å»ºc0ã€c1é›†ç¾¤ï¼Œç”¨æ¥å…³è”æ•°æ®æº1ã€2ã€‚**

è‡ªåŠ¨åˆ†ç‰‡é»˜è®¤è¦æ±‚é›†ç¾¤åå­—ä»¥cä¸ºå‰ç¼€ï¼Œæ•°å­—ä¸ºåç¼€ï¼Œc0å°±æ˜¯åˆ†ç‰‡è¡¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œc1å°±æ˜¯ç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥è‡ªå·±æ›´æ”¹å‘½åã€‚

**åˆ›å»ºé›†ç¾¤1:c0**

~~~sql
/*+ mycat:createCluster{
	"clusterType":"MASTER_SLAVE",
	"heartbeat":{
		"heartbeatTimeout":1000,
		"maxRetry":3,
		"minSwitchTimeInterval":300,
		"slaveThreshold":0
	},
	"masters":[
		"ds0" //ä¸»èŠ‚ç‚¹
	],
	"maxCon":2000,
	"name":"c0",
	"readBalanceType":"BALANCE_ALL",
	"switchType":"SWITCH"
} */;
~~~

**åˆ›å»ºé›†ç¾¤2:c1**

~~~sql
/*+ mycat:createCluster{
	"clusterType":"MASTER_SLAVE",
	"heartbeat":{
		"heartbeatTimeout":1000,
		"maxRetry":3,
		"minSwitchTimeInterval":300,
		"slaveThreshold":0
	},
	"masters":[
		"ds1" //ä¸»èŠ‚ç‚¹
	],
	"maxCon":2000,
	"name":"c1",
	"readBalanceType":"BALANCE_ALL",
	"switchType":"SWITCH"
} */;
~~~

æŸ¥çœ‹æ·»åŠ çš„é›†ç¾¤ä¿¡æ¯ï¼š`/*+ mycat:showClusters{} */`

![image-20231120111911003](https://image.xiaoxiaofeng.site/blog/2023/11/20/xxf-20231120111911.png?xxfjava)

### 3.4 åˆ›å»ºåˆ†ç‰‡è§„åˆ™

åœ¨`mycat`åˆ›å»ºæ•°æ®åº“`xxf_sharding`ã€‚

åœ¨Mycatæ•°æ®åº“æ‰§è¡ŒåŒæ­¥ç”Ÿæˆschema

~~~sql
/*+ mycat:createSchema{
	"customTables":{},
	"globalTables":{},
	"normalTables":{},
	"schemaName":"xxf_sharding",
	"shardingTables":{}
} */;
~~~

åœ¨`127.0.0.1:3307`å’Œ`127.0.0.1:3308`ä¸Šåˆ›å»ºæ•°æ®åº“`xxf_sharding`ã€‚

~~~sql
CREATE DATABASE `xxf_sharding`;
~~~

![image-20231120111426381](https://image.xiaoxiaofeng.site/blog/2023/11/20/xxf-20231120111426.png?xxfjava)

æ¥ç€åˆ›å»ºæ•°æ®åˆ†ç‰‡è§„åˆ™ï¼Œåœ¨Mycatä¸Šæ‰§è¡Œï¼Œé‡‡ç”¨æ³¨é‡Šæ–¹æ³•é…ç½®ï¼Œå…ˆçœ‹é…ç½®ï¼š

~~~sql
/*+ mycat:createTable{
  "schemaName":"xxf_sharding",
	"tableName":"xxf_user",
  "shardingTable":{
		"createTableSQL":"CREATE TABLE `xxf_user` (
			`id` BIGINT(20) NOT NULL COMMENT 'ç”¨æˆ·ID',
			`user_name` VARCHAR(30) NULL DEFAULT NULL COMMENT 'ç”¨æˆ·å§“å',
			`email` VARCHAR(50) NULL DEFAULT NULL COMMENT 'ç”¨æˆ·é‚®ç®±',
			`phone` VARCHAR(11) NULL DEFAULT NULL COMMENT 'æ‰‹æœºå·ç ',
			`sex` CHAR(1) NULL DEFAULT NULL COMMENT 'ç”¨æˆ·æ€§åˆ«',
			PRIMARY KEY (`id`) USING BTREE
		) COMMENT='ç¬‘å°æ«-ç”¨æˆ·ä¿¡æ¯è¡¨' COLLATE='utf8_general_ci' ENGINE=InnoDB;",
  
		"function":{
				"properties":{
					"mappingFormat": "c${targetIndex}/xxf_sharding/xxf_user_${tableIndex}",
					"dbNum":2, //åˆ†åº“æ•°é‡
					"tableNum":3, //åˆ†è¡¨æ•°é‡
					"tableMethod":"mod_hash(id)", //åˆ†è¡¨åˆ†ç‰‡å‡½æ•°
					"storeNum":2, //å®é™…å­˜å‚¨èŠ‚ç‚¹æ•°é‡
					"dbMethod":"mod_hash(id)" //åˆ†åº“åˆ†ç‰‡å‡½æ•°
					}
		 },
		 "partition":{
		}
	}
} */;
~~~

å¯ä»¥çœ‹åˆ°ds0å’Œds1éƒ½å·²ç»åˆ›å»ºå‡ºäº†å¯¹åº”çš„3ä¸ªåˆ†ç‰‡è¡¨

![image-20231120112120727](https://image.xiaoxiaofeng.site/blog/2023/11/20/xxf-20231120112120.png?xxfjava)



æŸ¥çœ‹ä¸€ä¸‹åˆ†ç‰‡è§„åˆ™ï¼Œåœ¨mycatä¸‹æ‰§è¡Œï¼š

~~~sql
/*+ mycat:showTopology{
	"schemaName":"xxf_sharding",
	"tableName":"xxf_user"
} */;
~~~

ç»“æœå¦‚ä¸‹ï¼š

![image-20231120112310952](https://image.xiaoxiaofeng.site/blog/2023/11/20/xxf-20231120112310.png?xxfjava)

åœ¨Mycatä¸‹æ‰§è¡Œä»¥ä¸‹æ’å…¥è¯­å¥ï¼š

~~~sql
INSERT INTO `xxf_user` VALUES (1, 'å¼ ä¸‰1', 'zhangsan1@xiaoxiaofeng.com', '18300000001', '1');
INSERT INTO `xxf_user` VALUES (2, 'å¼ ä¸‰2', 'zhangsan2@xiaoxiaofeng.com', '18300000002', '1');
INSERT INTO `xxf_user` VALUES (3, 'å¼ ä¸‰3', 'zhangsan3@xiaoxiaofeng.com', '18300000003', '1');
INSERT INTO `xxf_user` VALUES (4, 'å¼ ä¸‰4', 'zhangsan4@xiaoxiaofeng.com', '18300000004', '1');
INSERT INTO `xxf_user` VALUES (5, 'å¼ ä¸‰5', 'zhangsan5@xiaoxiaofeng.com', '18300000005', '1');
INSERT INTO `xxf_user` VALUES (6, 'å¼ ä¸‰6', 'zhangsan6@xiaoxiaofeng.com', '18300000006', '1');
~~~

å¯ä»¥çœ‹å‡ºæ¥ï¼Œæ’å…¥æ•°æ®æ ¹æ®mod_hashç®—æ³•åˆ†å¸ƒåˆ°äº†ä¸åŒçš„æ•°æ®æºï¼Œæ•°æ®åº“è¡¨ä¸­ã€‚åœ¨Mycatä¸Šå¯ä»¥çœ‹åˆ°`xxf_sharding`åº“ä¸‹çš„`xxf_user`è¡¨é‡Œæœ‰å…¨éƒ¨çš„æ•°æ®ã€‚

![image-20231120135740339](https://image.xiaoxiaofeng.site/blog/2023/11/20/xxf-20231120135740.png?xxfjava)

## 4. æœ¬ç³»åˆ—æ–‡ç« 

æœ¬ç³»åˆ—æ–‡ç« æŒç»­æ›´æ–°ä¸­ï¼ŒåŒ…æ‹¬Mycatæ­å»ºï¼Œè¯»å†™åˆ†ç¦»ï¼Œåˆ†åº“åˆ†è¡¨ç­‰ï¼Œæ•¬è¯·æœŸå¾…ã€‚

åç»­æ›´æ–°å®Œæˆç»Ÿä¸€ç»´æŠ¤é“¾æ¥ï¼Œå ä¸ªå‘å…ˆ...
