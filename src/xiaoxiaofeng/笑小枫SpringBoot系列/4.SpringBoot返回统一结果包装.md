## ä¸ºä»€ä¹ˆï¼Ÿ

> å‰åç«¯åˆ†ç¦»çš„æ—¶ä»£ï¼Œå¦‚æœæ²¡æœ‰ç»Ÿä¸€çš„è¿”å›æ ¼å¼ï¼Œç»™å‰ç«¯çš„ç»“æœå„å¼å„æ ·ï¼Œä¼°è®¡å‰ç«¯çš„å°ä¼™ä¼´å°±è¦éª‚å¨˜äº†ã€‚  
æˆ‘ä»¬æƒ³å¯¹è‡ªå®šä¹‰å¼‚å¸¸æŠ›å‡ºæŒ‡å®šçš„çŠ¶æ€ç æ’æŸ¥é”™è¯¯ï¼Œå¯¹ç³»ç»Ÿçš„ä¸å¯é¢„çŸ¥çš„å¼‚å¸¸æŠ›å‡ºå‹å¥½ä¸€ç‚¹çš„å¼‚å¸¸ä¿¡æ¯ã€‚  
æˆ‘ä»¬æƒ³è®©æ¥å£ç»Ÿä¸€è¿”å›ä¸€äº›é¢å¤–çš„æ•°æ®ï¼Œä¾‹å¦‚æ¥å£æ‰§è¡Œçš„æ—¶é—´ç­‰ç­‰ã€‚  
...  
æ‰€ä»¥å˜›ï¼Œä¸ç®¡æ˜¯æ—¥å¸¸å’Œå‰ç«¯å°ä¼™ä¼´å¯¹æ¥ï¼Œè¿˜æ˜¯å’Œå…¶ä»–éƒ¨é—¨è¿›è¡Œæ¥å£å¯¹æ¥ï¼Œéƒ½åº”è¯¥è¿”å›å›ºå®šçš„æ ¼å¼ã€‚  
æœ¬æ–‡ç»™å‡ºä¸€ä¸ªç®€å•é€šç”¨çš„è¿”å›æ ¼å¼ï¼Œå°ä¼™ä¼´ä»¬æœ‰éœ€æ±‚ï¼Œå¯ä»¥åŸºäºæ­¤ç‰ˆæœ¬æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡éœ€æ±‚ä¸°å¯Œè¿”å›æ ¼å¼ã€‚

è¿”å›æ•°æ®æ ¼å¼å¦‚ä¸‹ğŸ‘‡ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´ä»¬å¯ä»¥ç»§ç»­å¾€ä¸‹çœ‹SpringBootæ˜¯æ€ä¹ˆæ¥å®ç°çš„ã€‚

~~~json
{
  "status": true,
  "code": "0000",
  "msg": "",
  "data": {
    "id": 1,
    "deptId": 103,
    "userName": "admin",
    "nickName": "ç¬‘å°æ«",
    "userType": "00",
    "email": "xxf@163.com",
    "phone": "15888888888",
    "status": "0",
    "remark": "ç®¡ç†å‘˜"
  }
}
~~~

## æ€ä¹ˆåšï¼ŸğŸ§

é¦–å…ˆåˆ›å»ºä¸€ä¸ªæµ‹è¯•çš„Controllerï¼Œä»£ç å¦‚ä¸‹ğŸ‘‡

~~~java
package com.maple.demo.controller;

import com.maple.demo.util.ResultJson;
import lombok.Data;
import lombok.RequiredArgsConstructor;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

/**
 * @author ç¬‘å°æ«
 * @date 2022/07/15
 */
@RestController
@RequiredArgsConstructor
@RequestMapping("/example")
public class TestResultController {

    @GetMapping("/testResult")
    public Test testResult() {
        Test test = new Test();
        test.setName("ç¬‘å°æ«");
        test.setAge(18);
        test.setRemark("å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç¬‘å°æ«ï¼Œå–œæ¬¢æˆ‘çš„å°ä¼™ä¼´ç‚¹ä¸ªèµå‘—");
        return test;
    }

    @GetMapping("/testResultJson")
    public ResultJson testResultJson() {
        Test test = new Test();
        test.setName("ç¬‘å°æ«");
        test.setAge(18);
        test.setRemark("å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç¬‘å°æ«ï¼Œå–œæ¬¢æˆ‘çš„å°ä¼™ä¼´ç‚¹ä¸ªèµå‘—");
        return new ResultJson(test);
    }

    @Data
    static class Test {
        private String name;

        private Integer age;

        private String remark;
    }
}
~~~

æˆ‘ä»¬å…ˆçœ‹çœ‹è¿™æ˜¯è°ƒç”¨è¿”å›çš„ç»“æœğŸ‘€

~~~json
{
  "name": "ç¬‘å°æ«",
  "age": 18,
  "remark": "å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç¬‘å°æ«ï¼Œå–œæ¬¢æˆ‘çš„å°ä¼™ä¼´ç‚¹ä¸ªèµ"
}
~~~

ç„¶ååœ¨utilåŒ…ä¸‹å®šä¹‰ä¸€ä¸ªç»Ÿä¸€çš„è¿”å›æ ¼å¼ç±»ï¼Œä»£ç å¦‚ä¸‹ğŸ‘‡

~~~java
package com.maple.demo.util;

import lombok.Data;

/**
 * ç»Ÿä¸€è¿”å›ä¿¡æ¯åŒ…è£…ç±»
 *
 * @author ç¬‘å°æ«
 * @date 2022/07/15
 */
@Data
public class ResultJson {

    private static final String SUCCESS_CODE = "0000";

    /**
     * æˆåŠŸå¤±è´¥çš„çŠ¶æ€å€¼ï¼Œtrueï¼šæˆåŠŸï¼›falseï¼šå¤±è´¥
     * è¿™é‡Œè¿”å›ç¼–ç ä¸ºï¼šâ€œ0000â€ï¼Œç³»ç»Ÿå°±è®¤ä¸ºæ¥å£æˆåŠŸï¼›å…¶ä»–å€¼ï¼Œä»£è¡¨å¤±è´¥
     */
    private Boolean status;

    /**
     * çŠ¶æ€ç  æ­£ç¡®ä¸º0000
     */
    private String code;

    /**
     * è¿”å›æç¤ºä¿¡æ¯
     */
    private String msg;

    /**
     * è¿”å›æ•°æ®
     */
    private Object data;

    public ResultJson() {
        this.status = true;
        this.code = SUCCESS_CODE;
        this.msg = "";
    }

    public ResultJson(Object data) {
        this.status = true;
        this.code = SUCCESS_CODE;
        this.msg = "";
        this.data = data;
    }

    public ResultJson(String code, String msg) {
        this.status = SUCCESS_CODE.equals(code);
        this.code = code;
        this.msg = msg;
    }

    /**
     * å¦‚æœè¿”å›çŠ¶æ€ç é0000ï¼Œä¸”æ¥å£çŠ¶æ€ä¸ºæˆåŠŸï¼Œè¯·ä½¿ç”¨è¿™ä¸ª
     * @param status æ¥å£è¯·æ±‚çŠ¶æ€
     * @param code è¿”å›codeå€¼
     * @param msg è¿”å›æ¶ˆæ¯
     * @param data è¿”å›æ•°æ®
     */
    public ResultJson(Boolean status, String code, String msg, Object data) {
        this.status = status;
        this.code = code;
        this.msg = msg;
        this.data = data;
    }
}
~~~

### æ™®é€šç‰ˆï¼Œä»£ç ä¾µå…¥æ€§å¼º

è¿™æ ·æˆ‘ä»¬å¯ä»¥æŠŠç»“æœç»Ÿä¸€æ”¾åœ¨ResultJsoné‡Œé¢è¿”å›ï¼Œä»£ç å¦‚ä¸‹ğŸ‘‡

~~~java
package com.maple.demo.controller;

import com.maple.demo.util.ResultJson;
import lombok.Data;
import lombok.RequiredArgsConstructor;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

/**
 * @author ç¬‘å°æ«
 * @date 2022/07/15
 */
@RestController
@RequiredArgsConstructor
@RequestMapping("/example")
public class TestResultController {

    @GetMapping("/testResult")
    public Test testResult() {
        Test test = new Test();
        test.setName("ç¬‘å°æ«");
        test.setAge(18);
        test.setRemark("å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç¬‘å°æ«ï¼Œå–œæ¬¢æˆ‘çš„å°ä¼™ä¼´ç‚¹ä¸ªèµå‘—");
        return test;
    }

    /**
     * æ™®é€šçš„è¿”å›
     */
    @GetMapping("/testResultJson")
    public ResultJson testResultJson() {
        Test test = new Test();
        test.setName("ç¬‘å°æ«");
        test.setAge(18);
        test.setRemark("å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç¬‘å°æ«ï¼Œå–œæ¬¢æˆ‘çš„å°ä¼™ä¼´ç‚¹ä¸ªèµå‘—");
        return new ResultJson(test);
    }

    @Data
    static class Test {
        private String name;

        private Integer age;

        private String remark;
    }
}
~~~

æˆ‘ä»¬çœ‹ä¸€ä¸‹è¿”å›çš„ç»“æœğŸ‘‡

~~~json
{
  "status": true,
  "code": "0000",
  "msg": "",
  "data": {
    "name": "ç¬‘å°æ«",
    "age": 18,
    "remark": "å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç¬‘å°æ«ï¼Œå–œæ¬¢æˆ‘çš„å°ä¼™ä¼´ç‚¹ä¸ªèµå‘—"
  }
}
~~~

### åˆ‡é¢å¤„ç†ï¼Œä»£ç æ— ä¾µå…¥

ä¸Šè¿°ä»£ç è™½ç„¶å®ç°äº†åŠŸèƒ½ï¼Œä½†æ‰€æœ‰çš„è¿”å›ç»“æœéƒ½è¦å¤„ç†ï¼Œå¯¹ä»£ç æœ‰æ¯”è¾ƒå¼ºçš„ä¾µå…¥ï¼ŒSpringæ‹¥æœ‰å„ç§åˆ‡é¢çš„æ”¯æŒï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä»£ç æ— ä¾µå…¥çš„å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚

æœ€ååˆ›å»ºä¸€ä¸ªé…ç½®ç±»ï¼Œæ·»åŠ `@RestControllerAdvice`æ³¨è§£ï¼Œä»£ç å¦‚ä¸‹ğŸ‘‡

~~~java
package com.maple.demo.config;

import com.alibaba.fastjson.JSON;
import com.maple.demo.util.ResultJson;
import lombok.extern.slf4j.Slf4j;
import org.jetbrains.annotations.NotNull;
import org.springframework.core.MethodParameter;
import org.springframework.http.MediaType;
import org.springframework.http.converter.HttpMessageConverter;
import org.springframework.http.server.ServerHttpRequest;
import org.springframework.http.server.ServerHttpResponse;
import org.springframework.web.bind.annotation.RestControllerAdvice;
import org.springframework.web.servlet.mvc.method.annotation.ResponseBodyAdvice;

/**
 * å¯¹è¿”å›ç»“æœç»Ÿä¸€è¿›è¡Œå¤„ç†ï¼ŒåŒ…æ‹¬è¿”å›ç»“æœæ ¼å¼ç»Ÿä¸€åŒ…è£…ï¼Œè¿”å›å¼‚å¸¸ç»Ÿä¸€å¤„ç†
 *
 * @author ç¬‘å°æ«
 * @date 2022/07/15
 */
@Slf4j
@RestControllerAdvice
public class RestResponseAdvice implements ResponseBodyAdvice<Object> {

    @Override
    public boolean supports(@NotNull MethodParameter returnType,
                            @NotNull Class<? extends HttpMessageConverter<?>> converterType) {
        return true;
    }

    /**
     * è¿”å›ç»“æœåŒ…è£…ç»Ÿä¸€è¿”å›æ ¼å¼
     *
     * @return åŒ…è£…åçš„è¿”å›ç»“æœ
     */
    @Override
    public Object beforeBodyWrite(Object body,
                                  @NotNull MethodParameter returnType,
                                  @NotNull MediaType selectedContentType,
                                  @NotNull Class<? extends HttpMessageConverter<?>> selectedConverterType,
                                  @NotNull ServerHttpRequest request,
                                  ServerHttpResponse response) {
        // æŒ‡å®šè¿”å›çš„ç»“æœä¸ºapplication/jsonæ ¼å¼
        // ä¸æŒ‡å®šï¼ŒStringç±»å‹è½¬jsonåè¿”å›Content-Typeæ˜¯text/plain;charset=UTF-8
        response.getHeaders().setContentType(MediaType.APPLICATION_JSON);
        ResultJson result = new ResultJson(body);
        // è‹¥è¿”å›ç±»å‹æ˜¯ResultJsonï¼Œåˆ™ä¸è¿›è¡Œä¿®æ”¹
        if (body == null) {
            if (returnType.getParameterType().isAssignableFrom(String.class)) {
                return JSON.toJSONString(result);
            }
        } else if (body instanceof ResultJson) {
            return body;
        } else if (body instanceof String) {
            return JSON.toJSONString(result);
        }
        return result;
    }
}
~~~

è¿™æ ·å°±å®Œæˆäº†ç»Ÿä¸€ç»“æœçš„è¿”å›âœŒ

æˆ‘ä»¬å†è¯·æ±‚æ–‡ç« æœ€å¼€å§‹å†™çš„æµ‹è¯•æ–¹æ³•`http://127.0.0.1:6666/testResult`çœ‹ä¸€ä¸‹è¿”å›çš„ç»“æœğŸ‘€

~~~json
{
  "status": true,
  "code": "0000",
  "msg": "",
  "data": {
    "name": "ç¬‘å°æ«",
    "age": 18,
    "remark": "å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç¬‘å°æ«ï¼Œå–œæ¬¢æˆ‘çš„å°ä¼™ä¼´ç‚¹ä¸ªèµå‘—"
  }
}
~~~

è¿™æ ·ç»Ÿä¸€è¿”å›æ ¼å¼å°±å®Œæˆäº†ï¼Œå¯¹ä»£ç æ²¡æœ‰çš„ä¾µå…¥ï¼ŒåŸæ¥çš„ä»£ç è¯¥æ€ä¹ˆå†™è¿˜æ˜¯æ€ä¹ˆå†™ï¼Œæ˜¯ä¸æ˜¯å¾ˆniceã€‚

## æ’é™¤ä¸åŒ…è£…çš„æ¥å£

å¦‚æœé¡¹ç›®å¼•å…¥äº†Swaggeræˆ–è€…knife4jç­‰ï¼Œå¦‚æœå­˜åœ¨ä¸èƒ½è¢«åŒ…è£…çš„æ¥å£ï¼Œæˆ‘ä»¬è¿™é‡Œè¦ç»Ÿä¸€å¤„ç†ä¸€ä¸‹ï¼Œæ’é™¤æ‰è¿™äº›æ¥å£

åŠ ä¸€ä¸ªåŒ¹é…ï¼ŒæŠŠä¸éœ€è¦çš„åŒ…è£…çš„æ¥å£æ’é™¤æ‰ï¼Œè¯¦ç»†ä»£ç å¦‚ä¸‹ğŸ‘‡ğŸ‘‡

~~~java
package com.maple.demo.config;

import com.alibaba.fastjson.JSON;
import com.maple.demo.util.ResultJson;
import lombok.extern.slf4j.Slf4j;
import org.jetbrains.annotations.NotNull;
import org.springframework.core.MethodParameter;
import org.springframework.http.MediaType;
import org.springframework.http.converter.HttpMessageConverter;
import org.springframework.http.server.ServerHttpRequest;
import org.springframework.http.server.ServerHttpResponse;
import org.springframework.web.bind.annotation.RestControllerAdvice;
import org.springframework.web.servlet.mvc.method.annotation.ResponseBodyAdvice;

import javax.servlet.http.HttpServletRequest;
import java.util.Arrays;
import java.util.List;
import java.util.regex.Pattern;

/**
 * å¯¹è¿”å›ç»“æœç»Ÿä¸€è¿›è¡Œå¤„ç†ï¼ŒåŒ…æ‹¬è¿”å›ç»“æœæ ¼å¼ç»Ÿä¸€åŒ…è£…ï¼Œè¿”å›å¼‚å¸¸ç»Ÿä¸€å¤„ç†
 *
 * @author ç¬‘å°æ«
 * @date 2022/07/15
 */
@Slf4j
@RestControllerAdvice
public class RestResponseAdvice implements ResponseBodyAdvice<Object> {

    /**
     * ä¸éœ€è¦åŒ…è£…çš„æ¥å£ï¼Œä¼šç›´æ¥è¿”å›åŸç»“æœ
     */
    private final List<String> excludedUrlList = Arrays.asList(
            "/webjars/**",
            "/swagger/**",
            "/v2/api-docs",
            "/swagger-resources/**",
            "/swagger-resources"
    );

    @Override
    public boolean supports(@NotNull MethodParameter returnType,
                            @NotNull Class<? extends HttpMessageConverter<?>> converterType) {
        return true;
    }

    /**
     * è¿”å›ç»“æœåŒ…è£…ç»Ÿä¸€è¿”å›æ ¼å¼
     *
     * @return åŒ…è£…åçš„è¿”å›ç»“æœ
     */
    @Override
    public Object beforeBodyWrite(Object body,
                                  @NotNull MethodParameter returnType,
                                  @NotNull MediaType selectedContentType,
                                  @NotNull Class<? extends HttpMessageConverter<?>> selectedConverterType,
                                  @NotNull ServerHttpRequest request,
                                  @NotNull ServerHttpResponse response) {
        // ä¸éœ€è¦åŒ…è£…çš„æ¥å£ï¼Œç›´æ¥è¿”å›åŸç»“æœ
        String url =request.getURI().getPath();
        for (String excludedUrl : excludedUrlList) {
            if (Pattern.matches(excludedUrl.replace("*", ".*"), url)) {
                return body;
            }
        }

        // æŒ‡å®šè¿”å›çš„ç»“æœä¸ºapplication/jsonæ ¼å¼
        // ä¸æŒ‡å®šï¼ŒStringç±»å‹è½¬jsonåè¿”å›Content-Typeæ˜¯text/plain;charset=UTF-8
        response.getHeaders().setContentType(MediaType.APPLICATION_JSON);
        ResultJson result = new ResultJson(body);
        // è‹¥è¿”å›ç±»å‹æ˜¯ResultJsonï¼Œåˆ™ä¸è¿›è¡Œä¿®æ”¹
        if (body == null) {
            if (returnType.getParameterType().isAssignableFrom(String.class)) {
                return JSON.toJSONString(result);
            }
        } else if (body instanceof ResultJson) {
            return body;
        } else if (body instanceof String) {
            return JSON.toJSONString(result);
        }
        return result;
    }
}
~~~



## @RestControllerAdviceä»‹ç»ğŸ˜´

> é¦–å…ˆäº†è§£ä¸€ä¸‹SpringBootçš„`@RestControllerAdvice`æ³¨è§£ï¼Œå®ƒæ˜¯Springæ¡†æ¶3.2æ–°å¢çš„çš„æ³¨è§£  
> ç‚¹è¿›å»è¿™ä¸ªæ³¨è§£æºç ï¼Œå¯ä»¥çœ‹åˆ°å®ƒæ˜¯ç”±`@ControllerAdvice`å’Œ`@ResponseBody`çš„ç»„åˆæ³¨è§£  
> å®ƒé€šå¸¸ç”¨æ¥å®šä¹‰`@ExceptionHandler`ï¼Œ `@InitBinder`ä»¥åŠ`@ModelAttribute`é€‚ç”¨äºæ‰€æœ‰æ–¹æ³•`@RequestMapping`çš„æ–¹æ³•ã€‚  
> ç›´ç™½ç‚¹è¯´ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªå¢å¼ºControllerçš„æ³¨è§£ã€‚ä¸»è¦å®ç°ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢çš„åŠŸèƒ½

1. å…¨å±€å¼‚å¸¸å¤„ç†
2. å…¨å±€æ•°æ®é¢„å¤„ç†
3. å…¨å±€æ•°æ®ç»‘å®š

æˆ‘ä»¬çœ‹ä¸€ä¸‹`@RestControllerAdvice`æ³¨è§£çš„æºç 

~~~java
@Target({ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Documented
@ControllerAdvice
@ResponseBody
public @interface RestControllerAdvice {
    @AliasFor(
            annotation = ControllerAdvice.class
    )
    String[] value() default {};

    @AliasFor(
            annotation = ControllerAdvice.class
    )
    String[] basePackages() default {};

    @AliasFor(
            annotation = ControllerAdvice.class
    )
    Class<?>[] basePackageClasses() default {};

    @AliasFor(
            annotation = ControllerAdvice.class
    )
    Class<?>[] assignableTypes() default {};

    @AliasFor(
            annotation = ControllerAdvice.class
    )
    Class<? extends Annotation>[] annotations() default {};
}
~~~

ä½¿ç”¨`@RestControllerAdvice`å¸¸åšçš„ä¸¤ä¸ªåŠŸèƒ½çš„å®ç°

1. è¿”å›ç»Ÿä¸€æ ¼å¼çš„ç»“æœ
2. å¼‚å¸¸ç»Ÿä¸€å¤„ç†

## å°ç»“

å¥½å•¦ï¼Œæœ¬æ–‡å°±åˆ°è¿™é‡Œäº†ï¼Œæˆ‘ä»¬ç®€å•çš„æ€»ç»“ä¸€ä¸‹ï¼Œä¸»è¦ä»‹ç»äº†ä»¥ä¸‹å†…å®¹ğŸ‘‡ğŸ‘‡

* ä¸ºä»€ä¹ˆè¦è¿”å›ç»Ÿä¸€çš„ç»“æœä¿¡æ¯
* æ‰‹åŠ¨å°è£…ç»Ÿä¸€çš„è¿”å›ä¿¡æ¯
* ä½¿ç”¨@RestControllerAdviceè‡ªåŠ¨å°è£…è¿”å›ä¿¡æ¯
* ç®€å•ä»‹ç»@RestControllerAdviceæ³¨è§£

## å…³äºç¬‘å°æ«ğŸ’•

> æœ¬ç« åˆ°è¿™é‡Œç»“æŸäº†ï¼Œå–œæ¬¢çš„æœ‹å‹å…³æ³¨ä¸€ä¸‹æˆ‘å‘¦ğŸ˜˜ğŸ˜˜ï¼Œå¤§ä¼™çš„æ”¯æŒï¼Œå°±æ˜¯æˆ‘åšæŒå†™ä¸‹å»çš„åŠ¨åŠ›ã€‚
> è€è§„çŸ©ï¼Œæ‡‚äº†å°±ç‚¹èµæ”¶è—ï¼›ä¸æ‡‚å°±é—®ï¼Œæ—¥å¸¸åœ¨çº¿ï¼Œæˆ‘ä¼šå°±ä¼šå›å¤å“ˆ~ğŸ¤ª
> åç»­æ–‡ç« ä¼šé™†ç»­æ›´æ–°ï¼Œæ–‡æ¡£ä¼šåŒæ­¥åœ¨å¾®ä¿¡å…¬ä¼—å·ã€ä¸ªäººåšå®¢ã€CSDNå’ŒGitHubä¿æŒåŒæ­¥æ›´æ–°ã€‚ğŸ˜¬
> å¾®ä¿¡å…¬ä¼—å·ï¼šç¬‘å°æ«
> ç¬‘å°æ«ä¸ªäººåšå®¢ï¼š[https://www.xiaoxiaofeng.com](https://www.xiaoxiaofeng.com)
> CSDNï¼š[https://zhangfz.blog.csdn.net](https://zhangfz.blog.csdn.net)
> æœ¬æ–‡æºç ï¼š[https://github.com/hack-feng/maple-demo](https://github.com/hack-feng/maple-demo) 



